<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ãƒ‹ãƒˆãƒ­ãƒšãƒ³èˆŒä¸‹æŠ•ä¸ éŸ³å£°ã‚¬ã‚¤ãƒ‰</title>
<style>
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Hiragino Sans","Segoe UI",sans-serif;
background:linear-gradient(180deg,#f7fbff,#eef6ff);color:#0f172a;}
.header{padding:18px 16px 10px;}
.frame-title{border:2px solid #38bdf8;padding:14px 16px;border-radius:14px;background:#f8fcff;text-align:center;}
.frame-title h1{margin:0;font-size:20px;}
.frame-title p{margin:6px 0 0;font-size:14px;color:#475569;}
.note{font-size:12px;color:#475569;margin:12px 16px;}
.main{margin:0 16px 24px;padding:16px;background:#fff;border-radius:18px;box-shadow:0 8px 18px rgba(15,23,42,.08);}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;}
select{flex:1;max-width:100%;font-size:16px;padding:10px 36px 10px 12px;border-radius:12px;border:1px solid #cbd5f5;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
button{font-size:15px;padding:10px 14px;border-radius:12px;border:1px solid #cbd5f5;background:#eff6ff;}
button:active{transform:scale(.98);}
.label{margin-top:14px;font-size:13px;color:#475569;}
.jp{font-size:18px;font-weight:600;margin-top:6px;}
.en{font-size:16px;margin-top:4px;}
.controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px;}
audio{width:100%;margin-top:10px;}
.status{margin-top:8px;font-size:13px;color:#475569;}
.hint{margin-top:10px;font-size:12px;color:#64748b;}

/* Fullscreen image modal */
.img-btn{margin-top:12px;width:100%;font-weight:700;background:#f8fcff;border:2px solid #38bdf8;}
.img-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.55);z-index:20000;display:none;}
.img-modal{position:fixed;inset:0;z-index:20001;display:none;align-items:center;justify-content:center;padding:14px;}
.img-card{width:min(980px,100%);height:min(90vh,100%);background:#fff;border-radius:18px;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 18px 40px rgba(15,23,42,.35);}
.img-card-header{padding:12px 14px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #e2e8f0;}
.img-card-title{font-weight:800;}
.img-close{background:#eff6ff;border:1px solid #cbd5f5;border-radius:12px;padding:8px 12px;font-size:14px;}
.img-view{flex:1;display:flex;align-items:center;justify-content:center;background:#0b1220;}
.img-view img{max-width:100%;max-height:100%;object-fit:contain;}

</style>
</head>
<body>
<div class="header">
  <div class="frame-title">
    <h1>ãƒ‹ãƒˆãƒ­ãƒšãƒ³èˆŒä¸‹æŠ•ä¸</h1>
    <p>English Audio Guide</p>
  </div>
</div>

<p class="note">â€» iPhone / iPad / Android ã§å†ç”Ÿã§ãã¾ã™ã€‚æœ€åˆã¯ã€Œå†ç”Ÿã€ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚</p>

<div class="main">
  <div class="row">
    <select id="sel"></select>
    <button id="prev">â† å‰</button>
    <button id="next">æ¬¡ â†’</button>
  </div>

  <div class="label">æ—¥æœ¬èªï¼ˆå†…å®¹ï¼‰</div>
  <div class="jp" id="jp"></div>

  <div class="label">English (Script)</div>
  <div class="en" id="en"></div>

  <div class="controls">
    <button id="play">â–¶ï¸ å†ç”Ÿ</button>
    <button id="pause">â¸ ä¸€æ™‚åœæ­¢</button>
    <button id="replay">â†» ã‚‚ã†ä¸€åº¦</button>
  </div>

  <div class="controls" style="margin-top:12px;">
    <button class="img-btn" id="openNitroImage" type="button">ğŸ–¼ ãƒ‹ãƒˆãƒ­ãƒšãƒ³æŠ•ä¸ã‚¤ãƒ¡ãƒ¼ã‚¸å›³</button>
  </div>

  <div class="status" id="status">å¾…æ©Ÿä¸­ / Ready</div>
  <audio id="player" controls></audio>

  <div class="hint">
    å†ç”Ÿã§ããªã„å ´åˆï¼šæ¶ˆéŸ³ãƒ¢ãƒ¼ãƒ‰è§£é™¤ã€éŸ³é‡ã€Bluetoothæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
  </div>
</div>

<script>
const STEPS = [
 {preview:"èˆŒã®ä¸‹ã«ãŠè–¬ã‚’å…¥ã‚Œã¾ã™â€¦", jp:"ã“ã‚Œã‹ã‚‰ãŠè–¬ã‚’èˆŒã®ä¸‹ã«å…¥ã‚Œã¾ã™ã€‚å¿ƒè‡“ã®è¡€ç®¡ã‚’åºƒã’ã‚‹ãŠè–¬ã§ã™ã€‚", en:"Weâ€™re going to put a medicine under your tongue. It helps widen the blood vessels in your heart."},
 {preview:"èˆŒä¸‹éŒ ã®èª¬æ˜â€¦", jp:"ã“ã‚Œã¯èˆŒä¸‹éŒ ã§ã™ã€‚èˆŒã®ä¸‹ã§æº¶ã‘ã‚‹ã®ã§ã€é£²ã¿è¾¼ã¾ãªã„ã§ãã ã•ã„ã€‚", en:"This is a sublingual tablet that dissolves under your tongue, so please donâ€™t swallow it."},
 {preview:"æº¶ã‘ã«ãã„å ´åˆâ€¦", jp:"æº¶ã‘ã«ãã„å ´åˆã¯ã€é£´ã®ã‚ˆã†ã«ãªã‚ã¦ã‚‚æ§‹ã„ã¾ã›ã‚“ãŒã€å™›ã¾ãªã„ã§ãã ã•ã„ã€‚", en:"If itâ€™s hard to dissolve, you can lick it like a candy to help it dissolved, but please donâ€™t chew or bite it."},
 {preview:"é ­ç—›ã«ã¤ã„ã¦â€¦", jp:"ã“ã®ãŠè–¬ã¯è„³ã®è¡€ç®¡ã‚‚åºƒã’ã‚‹ãŸã‚ã€è»½ã„é ­ç—›ã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ãŒã€å¿ƒé…ã„ã‚Šã¾ã›ã‚“ã€‚", en:"This medicine can also widen the blood vessels in your brain, so you may feel a light headache, but itâ€™s nothing to worry about."},
 {preview:"é ­ç—›ãŒå¼·ã„å ´åˆâ€¦", jp:"å¤šãã®æ–¹ã¯è»½ã„é ­ç—›ã§ã™ãŒã€å¼·ããªã£ãŸå ´åˆã¯ã™ãã«ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚", en:"Most patients feel just a mild headache, but if you feel the headache is getting worse, please tell us right away."},
 {preview:"èˆŒã‚’ä¸Šã’ã¦â€¦", jp:"ãŠå£ã‚’é–‹ã‘ã¦ã€èˆŒã‚’ä¸Šã’ã¦ãã ã•ã„ã€‚", en:"Please open your mouth and lift your tongue."},
 {preview:"é£²ã¿è¾¼ã¾ãªã„ã§â€¦", jp:"éŒ å‰¤ã¯é£²ã¿è¾¼ã¾ãªã„ã§ãã ã•ã„ã€‚", en:"Please donâ€™t swallow the tablet."},
 {preview:"èˆŒã®ä¸Šã§æº¶ã‹ã™â€¦", jp:"é£´ã®ã‚ˆã†ã«èˆŒã®ä¸Šã§æº¶ã‹ã—ã¦ãã ã•ã„ã€‚", en:"Let it dissolve like a candy on your tongue."},
 {preview:"æº¶ã‘ãŸã‚‰æ•™ãˆã¦â€¦", jp:"ãŠè–¬ãŒæº¶ã‘ãŸã‚‰æ•™ãˆã¦ãã ã•ã„ã€‚", en:"Please let me know when the medicine has dissolved."},
 {preview:"æº¶ã‘ã¾ã—ãŸã‹ï¼Ÿâ€¦", jp:"æº¶ã‘ã¾ã—ãŸã‹ï¼Ÿã¾ã èˆŒã®ä¸‹ã«ã‚ã‚Šã¾ã™ã‹ï¼Ÿ", en:"Has it dissolved? Is it still there under your tongue?"}
];

const sel=document.getElementById('sel'),
jp=document.getElementById('jp'),
en=document.getElementById('en'),
player=document.getElementById('player'),
status=document.getElementById('status');

STEPS.forEach((s,i)=>{
 const o=document.createElement('option');
 o.value=i;
 o.textContent=`${String(i+1).padStart(2,'0')}ï½œ${s.jp}`;
 sel.appendChild(o);
});

let idx=0;
function load(i){
 idx=Math.max(0,Math.min(STEPS.length-1,i));
 sel.value=idx;
 jp.textContent=STEPS[idx].jp;
 en.textContent=STEPS[idx].en;
 player.src=`audio/step_${String(idx+1).padStart(2,'0')}.m4a`;
 status.textContent="å¾…æ©Ÿä¸­ / Ready";
}
sel.onchange=()=>load(parseInt(sel.value));
document.getElementById('prev').onclick=()=>load(idx-1);
document.getElementById('next').onclick=()=>load(idx+1);
document.getElementById('play').onclick=()=>player.play();
document.getElementById('pause').onclick=()=>player.pause();
document.getElementById('replay').onclick=()=>{player.currentTime=0;player.play();}
player.onplay=()=>status.textContent="å†ç”Ÿä¸­ / Playing";
player.onpause=()=>status.textContent="ä¸€æ™‚åœæ­¢ / Paused";
player.onended=()=>status.textContent="å¾…æ©Ÿä¸­ / Ready";

// Nitro image modal
const openNitroImageBtn = document.getElementById('openNitroImage');
const nitroImgBackdrop = document.getElementById('nitroImgBackdrop');
const nitroImgModal = document.getElementById('nitroImgModal');
const closeNitroImageBtn = document.getElementById('closeNitroImage');


const nitroImgEl = document.getElementById('nitroImg');
const nitroImgErr = document.getElementById('nitroImgErr');

function setNitroImgSrc(){
  if(!nitroImgEl) return;
  if(nitroImgErr) nitroImgErr.style.display='none';
  // Cache-bust to avoid GitHub Pages/Browser caching a 404
  nitroImgEl.src = 'img/nitropen_image.jpg?v=' + Date.now();
}

if(nitroImgEl){
  nitroImgEl.addEventListener('error', ()=>{
    if(nitroImgErr) nitroImgErr.style.display='block';
  });
}


function openNitroImage(){
  if(!nitroImgBackdrop || !nitroImgModal) return;
  setNitroImgSrc();
  nitroImgBackdrop.style.display='block';
  nitroImgModal.style.display='flex';
}
function closeNitroImage(){
  if(!nitroImgBackdrop || !nitroImgModal) return;
  nitroImgBackdrop.style.display='none';
  nitroImgModal.style.display='none';
}

if(openNitroImageBtn) openNitroImageBtn.addEventListener('click', openNitroImage);
if(closeNitroImageBtn) closeNitroImageBtn.addEventListener('click', closeNitroImage);
if(nitroImgBackdrop) nitroImgBackdrop.addEventListener('click', closeNitroImage);
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeNitroImage(); });


load(0);
</script>

<div class="img-backdrop" id="nitroImgBackdrop"></div>
<div class="img-modal" id="nitroImgModal" role="dialog" aria-modal="true" aria-label="nitropen image">
  <div class="img-card">
    <div class="img-card-header">
      <div class="img-card-title">ãƒ‹ãƒˆãƒ­ãƒšãƒ³æŠ•ä¸ã‚¤ãƒ¡ãƒ¼ã‚¸å›³</div>
      <button class="img-close" id="closeNitroImage" type="button">é–‰ã˜ã‚‹</button>
    </div>
    <div class="img-view">
      <img id="nitroImg" src="img/nitropen_image.jpg" alt="ãƒ‹ãƒˆãƒ­ãƒšãƒ³æŠ•ä¸ã‚¤ãƒ¡ãƒ¼ã‚¸å›³">
    </div>
  </div>
</div>

</body>
</html>
